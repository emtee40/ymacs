!function(){function DlGridCellModel(t){0<arguments.length&&(DlEventProxy.call(this),DlGridCellModel.setDefaults(this,t="object"!=typeof t?{value:t}:t),this.registerEvents(DEFAULT_EVENTS))}DlGridCellModel.inherits(DlEventProxy),eval(Dynarch.EXPORT("DlGridCellModel"));var DEFAULT_EVENTS=["onChange"];D.DEFAULT_ARGS={_value:["value",null],_style:["style",{}]},P.setValue=function(t){var e=this._value;this._value=t,this.applyHooks("onChange",[this,"value",t,e])},P.getContent=function(){return this._value},P.getStyle=function(t,e){return t in this._style?this._style[t]:e},P.getIndex=function(){return this.index},P.getId=function(){return this.model.getColByIndex(this.index).id},P.setStyle=function(t,e){var n=this._style[t];this._style[t]=e,this.applyHooks("onChange",[this,"style",e,n,t])},P.compareTo=function(t){return this._value<t._value?-1:this._value>t._value?1:0}}(),!function(){function DlGridColModel(args){0<arguments.length&&(DlEventProxy.call(this),DlGridColModel.setDefaults(this,args),this.registerEvents(DEFAULT_EVENTS),"string"==typeof this._cellType)&&(this._cellType=eval(this._cellType))}DlGridColModel.inherits(DlEventProxy),eval(Dynarch.EXPORT("DlGridColModel"));var DEFAULT_EVENTS=["onChange"];D.DEFAULT_ARGS={width:["width",null],fill:["fill",!1],_label:["label",null],id:["id",null],_cellType:["cellType",DlGridCellModel],isResizable:["resizable",!1],isScrollable:["scrollable",!0],isSortable:["sortable",!0],tooltip:["tooltip",null],_style:["style",{}],_iconClass:["iconClass",null]},P.getId=function(){return this.id},P.getIndex=function(){return this.index},P.getIconClass=function(){return this._iconClass},P.setIconClass=function(t){var e=this._iconClass;this._iconClass=t,this.applyHooks("onChange",[this,"iconClass",val,e])},P.getLabel=function(){return this._label},P.setLabel=function(t){var e=this._label;this._label=t,this.applyHooks("onChange",[this,"label",val,e])},P.getCellType=function(){return this._cellType},P.createCell=function(t){return new this._cellType(t)},P.getStyle=function(t,e){return t in this._style?this._style[t]:e},P.setStyle=function(t,e){var n=this._style[t];this._style[t]=e,this.applyHooks("onChange",[this,"style",e,n,t])},P.sort=function(){this.model.sort(this)},P.compareRows=function(t,e){var n=this.getIndex();return t=t.getCellByIndex(n),e=e.getCellByIndex(n),t.compareTo(e)}}(),!function(){function DlGridRowModel(n){var o;0<arguments.length&&(n instanceof Array&&(o={id:n.id,model:n.model,cells:{}},n.model.foreachCol(function(t,e){o.cells[t.getId()]=n[e]}),n=o),DlEventProxy.call(this),D.setDefaults(this,n),this.registerEvents(DEFAULT_EVENTS),this._init())}DlGridRowModel.inherits(DlEventProxy),eval(Dynarch.EXPORT("DlGridRowModel"));var DEFAULT_EVENTS=["onChange"];D.DEFAULT_ARGS={id:["id",null],userData:["data",null],_cells:["cells",null],_model:["model",null],tooltip:["tooltip",null]},P.reset=function(n){this.id=n.id,this.userData=n.data,this.tooltip=n.tooltip,this.foreachCell(function(t,e){t.setValue(n.cells[e.getId()])})},P.getId=function(){return this.id},P.getIndex=function(){return this.index},P.getCells=function(){return this._cells},P.getCellByIndex=function(t){return this._cells[this.model.getColByIndex(t).getId()]},P.foreachCell=function(o,l){this.model.foreachCol(function(t,e){var n=this._cells[t.getId()];o.apply(l,[n,t,e])},this)},P._onCellChange=function(t,e,n,o){this.applyHooks("onChange",[this,t,e,n,o])},P._init=function(){var t,e=this._model,n=this._cells,o=(this.model=e,delete this._model,this._onCellChange.$(this));for(t in n){var l=n[t],s=e.getColById(t);(l=n[t]=s.createCell(l)).model=e,l.colId=t,l.index=s.getIndex(),l.parent=this,l.addEventListener("onChange",o)}}}(),!function(){function DlGridModel(t){0<arguments.length&&(DlEventProxy.call(this),DlGridModel.setDefaults(this,t),this.registerEvents(DEFAULT_EVENTS),this._init())}DlGridModel.inherits(DlEventProxy),eval(Dynarch.EXPORT("DlGridModel"));var DEFAULT_EVENTS=["onInsertRow","onDeleteRow","onInsertCol","onInsertCol","onMoveRow","onMoveCol","onRowChange","onColChange","onSort"];D.DEFAULT_ARGS={_rows:["rows",[]],_cols:["cols",null]},P.getRowById=function(t){return this._rowsById[t]},P.getRowByIndex=function(t){return this._rows[t]},P.foreachRow=function(){return this._rows.foreach.apply(this._rows,arguments)},P.foreachCol=function(){return this._cols.foreach.apply(this._cols,arguments)},P.getColById=function(t){return this._colsById[t]},P.getColByIndex=function(t){return this._cols[t]},P._init=function(){this.__sortCol=null,this.__sortDesc=!1;var n=this._colsById={},o=this._rowsById={};this._onRowChange=this._onColChange.$(this),this._onRowChange=this._onRowChange.$(this),this._cols.r_assign_each(function(t,e){return(e=new DlGridColModel(e)).model=this,e.index=t,e.addEventListener("onChange",this._onColChange),e.id&&(n[e.id]=e),e},this),this._rows.r_assign_each(function(t,e){return e.model=this,(e=new DlGridRowModel(e)).index=t,e.addEventListener("onChange",this._onRowChange),e.id&&(o[e.id]=e),e},this)},P._onColChange=function(t,e,n,o){this.applyHooks("onColChange",[this,t,e,n,o])},P._onRowChange=function(t,e,n,o,l){this.applyHooks("onRowChange",[this,t,e,n,o,l])},P._getInsertPos=function(n){var o=this.__sortCol;return this._rows.foreach(function(t,e){t=o.compareRows(t,n);0<=(t=this.__sortDesc?-t:t)&&$RETURN(e)},this)},P.insertRow=function(t,e){t.model=this,t=new DlGridRowModel(t);var n=this._rows,o=n.length;null!=e&&-1!=e||(e=this.__sortCol?this._getInsertPos(t):o),n.splice(e,0,t),++o;for(var l=e;l<o;++l)n[l].index=l;return t.addEventListener("onChange",this._onRowChange),t.id&&(this._rowsById[t.id]=t),this.applyHooks("onInsertRow",[t]),t},P.deleteRowById=function(t){this.deleteRowByIndex(this.getRowById(t).getIndex())},P.deleteRowByIndex=function(t){var e=this._rows,n=e[t];n.id&&delete this._rowsById[n.id],e.splice(t,1);for(var o=t;o<e.length;++o)e[o].index=o;return n.removeEventListener("onChange",this._onRowChange),this.applyHooks("onDeleteRow",[n]),n.destroy(),n},P.setValues=function(t){for(this.__sortDesc=!1,this.applyHooks("onSort",[null,this.__sortCol]),t.foreach(function(t,e){t instanceof Array&&(t={cells:t});e=this.getRowByIndex(e);e?(e.id&&delete this._rowsById[e.id],t.id&&(this._rowsById[t.id]=e),e.reset(t)):this.insertRow(t,this._rows.length)},this);t.length<this._rows.length;)this.deleteRowByIndex(this._rows.length-1)},P.sort=function(n){var t=this.__sortCol,e=(this.__sortDesc=t===n&&!this.__sortDesc,(this.__sortCol=n).getIndex(),this._rows=this._rows.mergeSort(function(t,e){return n.compareRows(t,e)},this.__sortDesc),this._rows.map(function(t,e){var n=t.index;return t.index=e,n}));this.applyHooks("onSort",[n,t,this.__sortDesc,e])}}();